# 正式批一筛前最后任务
- 了解FreeRTOS的多线程机制，任务调度原理，消息队列使用
- 手动创建三个任务:PWM呼吸灯、串口收发任务、IMU读取任务，要求**任务周期精确**（**`vTaskDelayUntil()`**）
- 在任务间使用消息队列，不管是在中断回调里还是任务里，最终效果就/是通过上位机能改变呼吸灯最高亮度或呼吸频率。
- 后面软件任务的代码编写都要基于FreeRTOS

为了方便管理就自己放个仓库了
## v1.0 
不知道为什么退回原始版本了 这个没有用的XD
## v1.1
基本完成了这三个任务 但是现在比较神奇的是DMA好像不是每次都能收得到（？）
就是 要多点几次才能收到数据 不过后面的PWM亮度更改倒是很畅通无阻 队列应该是没问题
## v1.2
资料收集：
https://shequ.stmicroelectronics.cn/thread-633323-1-1.html
目前计划是 先试试之前的DMA 测试一下有没有硬件问题
不过还是很奇怪啊 我看了下之前的代码 感觉差的不多？真是奇怪
另一种选择是直接用中断了 gc的DMA真是惹怒我了！！！

二编： 
有可能是MPU的问题？为了初始化方便我把优先级设置成了2 但是这样可能会堵塞其他两个任务
而之前都是1的时候 由于while初始化一直在运作 可能会比较卡资源(也许)
现在也可以试试拆成两个任务 一个2优先级专门给mpu初始化 一个1优先级的读取 然后如果2没有成功 则1会有个专属的Flag没有标记上 不会运行、

## v1.3
最后发现打开UART global中断就可以了。。。
我以为DMA和这个是独立开的 实际上两个都要勾选
此任务结束（撒花）